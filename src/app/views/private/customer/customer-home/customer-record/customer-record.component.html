<mat-toolbar
  color="primary"
  fxFlex="100vw"
  style="position: fixed; padding: 0; z-index: 9"
>
  <div *ngIf="!edit" fxFlex="100" fxLayoutAlign="space-between center">
    <button mat-button routerLink="/clientes">
      <mat-icon>arrow_back</mat-icon>
    </button>

    <span fxFlex="60" style="contain: content">{{ data?.nome }}</span>

    <button mat-button (click)="edit = !edit">
      <mat-icon>edit</mat-icon>
    </button>
  </div>

  <div *ngIf="edit" fxFlex="100" fxLayoutAlign="space-between center">
    <button mat-button (click)="edit = !edit">
      <mat-icon>highlight_off</mat-icon>
    </button>

    <span>Cadastro Completo</span>

    <button mat-button>
      <mat-icon>done_outline</mat-icon>
    </button>
  </div>
</mat-toolbar>

<div
  *ngIf="!loading && !edit"
  style="margin-top: 56px; margin-bottom: 56px; width: 100vw"
>
  <mat-list>
    <mat-list-item (click)="edit = !edit">
      <div fxFlex fxLayoutAlign="center center" fxFlex="77">
        <div
          mat-list-icon
          fxLayoutAlign="center center"
          [style]="data?.nome || '' | iconColor"
          class="icon"
        >
          <span fxLayoutAlign="center center">
            {{ data?.nome || "" | iconCustomer }}
          </span>
        </div>
        <div fxFlex style="margin-left: 16px" fxFlex="80">
          <div mat-line>
            {{ data?.nome }}
          </div>
          <div mat-line>
            {{ data?.telefone1 || "" | formatPhone }}
          </div>
          <div mat-line>
            {{ data?.email }}
          </div>
        </div>
      </div>

      <a href="tel:{{ data?.telefone1 }}" target="_blank">
        <button mat-icon-button aria-label="Telefone">
          <mat-icon style="color: black">phone</mat-icon>
        </button>
      </a>

      <a
        href="https://api.whatsapp.com/send?phone=55{{
          data?.telefone1
        }}text=Ol%C3%A1"
        target="_blank"
      >
        <app-whatsapp-icon></app-whatsapp-icon>
      </a>
    </mat-list-item>
  </mat-list>

  <mat-tab-group mat-align-tabs="center">
    <mat-tab label="Dados">Dados</mat-tab>

    <mat-tab label="Histórico"
      >Histórico

      <table
        mat-table
        [dataSource]="dataSource"
        multiTemplateDataRows
        class="mat-elevation-z8"
      >
        <ng-container
          matColumnDef="{{ column }}"
          *ngFor="let column of columnsToDisplay"
        >
          <th mat-header-cell *matHeaderCellDef>{{ column }}</th>
          <td mat-cell *matCellDef="let element">{{ element[column] }}</td>
        </ng-container>

        <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
        <ng-container matColumnDef="expandedDetail">
          <td
            mat-cell
            *matCellDef="let element"
            [attr.colspan]="columnsToDisplay.length"
          >
            <div
              class="example-element-detail"
              [@detailExpand]="
                element == expandedElement ? 'expanded' : 'collapsed'
              "
            >
              <div class="example-element-diagram">
                <div class="example-element-position">
                  {{ element.position }}
                </div>
                <div class="example-element-symbol">{{ element.symbol }}</div>
                <div class="example-element-name">{{ element.name }}</div>
                <div class="example-element-weight">{{ element.weight }}</div>
              </div>
              <div class="example-element-description">
                {{ element.description }}
                <span class="example-element-description-attribution">
                  -- Wikipedia
                </span>
              </div>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr
          mat-row
          *matRowDef="let element; columns: columnsToDisplay"
          class="example-element-row"
          [class.example-expanded-row]="expandedElement === element"
          (click)="
            expandedElement = expandedElement === element ? null : element
          "
        ></tr>
        <tr
          mat-row
          *matRowDef="let row; columns: ['expandedDetail']"
          class="example-detail-row"
        ></tr>
      </table>
    </mat-tab>

    <mat-tab label="Documentos"
      >Documentos

      <mat-grid-list cols="2" rowHeight="2:1">
        <mat-grid-tile>1</mat-grid-tile>
        <mat-grid-tile>2</mat-grid-tile>
        <mat-grid-tile>3</mat-grid-tile>
        <mat-grid-tile>4</mat-grid-tile>
      </mat-grid-list>
    </mat-tab>
  </mat-tab-group>
</div>

<app-customer-complete-registration
  *ngIf="edit"
  [data]="data"
></app-customer-complete-registration>
