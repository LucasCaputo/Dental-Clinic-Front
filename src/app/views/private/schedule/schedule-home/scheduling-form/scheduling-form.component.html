<div *ngIf="loading">
  <mat-spinner style="margin: 0 auto"></mat-spinner>
  <h5>Estamos buscando seus clientes, aguarde...</h5>
</div>

<div *ngIf="!loading">
  <h1 mat-dialog-title>Novo Agendamento</h1>
  <div mat-dialog-content style="height: 300px">
    <form fxLayout="column">
      <mat-form-field style="width: 100%">
        <mat-label>Título</mat-label>
        <input
          matInput
          placeholder="Nome do Serviço"
          autocomplete="off"
          type="text"
          [(ngModel)]="title"
          name="title"
        />
      </mat-form-field>

      <mat-form-field style="width: 100%">
        <mat-label>Cliente</mat-label>
        <input
          type="text"
          placeholder="Pesquise um Cliente"
          aria-label="Pesquisa de Cliente"
          matInput
          [formControl]="customerControl"
          [matAutocomplete]="auto"
          [(ngModel)]="customerEdit"
        />
        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
          <mat-option
            *ngFor="let option of filteredOptions | async"
            [value]="option.text"
            (click)="customer = option.id"
          >
            {{ option.text }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>

      <div fxFlex fxLayout="row" fxLayoutAlign="space-between center">
        <mat-form-field fxFlex="30">
          <mat-label>Início</mat-label>
          <input
            matInput
            [matDatepicker]="picker"
            [(ngModel)]="dateStart"
            name="dateStart"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <mat-form-field fxFlex="30">
          <mat-label>Hora</mat-label>
          <input
            matInput
            type="time"
            [(ngModel)]="timeStart"
            name="timeStart"
          />
        </mat-form-field>

        <mat-form-field fxFlex="30">
          <mat-label>Hora</mat-label>
          <input matInput type="time" [(ngModel)]="timeEnd" name="timeEnd" />
        </mat-form-field>
      </div>

      <div mat-dialog-actions>
        <div fxFlex fxLayoutAlign="end center">
          <button mat-raised-button color="basic" mat-dialog-close>
            Cancelar
          </button>
          <button
            mat-raised-button
            color="primary"
            [mat-dialog-close]="{
              data: data,
              title: title,
              date: dateStart,
              timeStart: timeStart,
              timeEnd: timeEnd,
              customer: customer
            }"
          >
            Cadastrar
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
